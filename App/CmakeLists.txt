# App/CMakeLists.txt
cmake_minimum_required(VERSION 3.10)
set(CMAKE_TOOLCHAIN_FILE "${CMAKE_SOURCE_DIR}/cmake/gcc-arm-none-eabi.cmake")
project(app LANGUAGES CXX)

# 设置 C++ 标准
set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED True)

# # 添加所有的 .cpp 文件
# # file(GLOB APP_SOURCES "*.cpp")

# # 包含 cmake 文件夹中的头文件
# include_directories(${CMAKE_SOURCE_DIR}/cmake/include)

# # 创建可执行文件
# add_executable(AppExecutable ${APP_SOURCES})

# 定义要编译的目标
# 通过注释掉不需要的目标，只保留一个需要编译的目标
set(TARGETS_TO_BUILD
    #PERIPHERAL_TEST
    #DRIVER_TEST
    #APP_TEST
    #APP_CALIBRATION_TEST
    #APP_CONTROL_TEST 
    PACKET_TEST
    #MAIN
)

# 设置预处理宏
foreach(target IN LISTS TARGETS_TO_BUILD)
    add_definitions(-D${target})
endforeach()

add_subdirectory(
    ./Applications
)

add_subdirectory(
    ./Drivers
)

add_subdirectory(
    ./Peripherals
)
# 链接 stm32cubemx 库
#target_link_libraries(AppExecutable PRIVATE peripherals drivers applications)
#target_link_libraries(peripherals)


